# 調査結果レポート

**プロジェクト**: `/Users/arigatatsuya/Work/git/github.com/sk8metalme/confluence-markdown`

**日時**: 2026-01-31T01:03:13.586Z

---

調査が完了しました。以下にai-agent-setupリポジトリの構造とプラグイン/スキルの配置パターンをまとめます。

---

## 調査結果レポート

### 1. リポジトリ全体の構造

```
/Users/arigatatsuya/Work/git/github.com/sk8metalme/ai-agent-setup/
├── .claude/                    # プロジェクトテンプレート
├── .claude-plugin/             # マーケットプレイス設定
├── global/                     # グローバル設定（install-global.shで配布）
├── plugins/                    # 全プラグインのソース（14個）
├── docs/                       # ドキュメント
├── install-global.sh           # グローバル設定配布スクリプト
├── install-project.sh          # プロジェクト設定配布スクリプト
└── README.md
```

### 2. プラグインの設定ファイル構造

各プラグインは以下の構造を持っています。

**plugin.json** の配置場所:
```
plugins/<plugin-name>/.claude-plugin/plugin.json
```

**最小限の plugin.json 例 (ci-cd-tools)**:
```json
{
  "name": "ci-cd-tools",
  "description": "CI/CD troubleshooting and GitHub Actions support.",
  "version": "1.0.0",
  "author": { "name": "sk8metalme" },
  "repository": "https://github.com/sk8metalme/ai-agent-setup",
  "license": "MIT",
  "keywords": ["ci-cd", "github-actions"],
  "skills": ["./skills/ci-cd"]
}
```

**フル構成の plugin.json 例 (development-toolkit)**:
```json
{
  "name": "development-toolkit",
  "description": "Complete development workflow...",
  "version": "1.8.1",
  "author": { "name": "sk8metalme" },
  "repository": "https://github.com/sk8metalme/ai-agent-setup",
  "license": "MIT",
  "keywords": ["development", "workflow"],
  "commands": [
    "./commands/plan.md",
    "./commands/dev.md"
  ],
  "agents": [
    "./agents/changelog-generator/AGENT.md"
  ],
  "skills": [
    "./skills/changelog",
    "./skills/secrets-guard"
  ]
}
```

### 3. スキル (skills/) の構成

**基本構成**:
```
plugins/<plugin-name>/skills/<skill-name>/
├── SKILL.md              # 必須: スキル定義
└── references/           # オプション: 参照資料
    └── *.md
```

**SKILL.md のフロントマター形式**:
```markdown
---
name: <skill-name>
description: "スキルの説明"
model: sonnet              # オプション: 使用モデル
allowed-tools: Read, Grep, Glob, AskUserQuestion, Task
---

# スキル名

## 概要
...
```

### 4. エージェント (agents/) の構成

```
plugins/<plugin-name>/agents/<agent-name>/
└── AGENT.md              # エージェント定義
```

**AGENT.md のフロントマター形式**:
```markdown
---
name: <agent-name>
description: |
  エージェントの説明
allowed-tools: Bash, Read, Grep, Glob
---

# エージェント名

## 目的
...
```

### 5. コマンド (commands/) の構成

```
plugins/<plugin-name>/commands/
├── plan.md
├── dev.md
└── create_pr.md
```

**コマンドファイルのフロントマター形式**:
```markdown
---
name: plan [--term=<day>] [--team-size=<n>]
description: コマンドの説明
model: opusplan            # オプション: 使用モデル
---

# コマンド定義
...
```

### 6. 既存プラグインのパターン

| プラグイン名 | skills | agents | commands | 複雑度 |
|-------------|--------|--------|----------|--------|
| ci-cd-tools | 1 | 0 | 0 | 最小 |
| quizknock | 1 | 0 | 0 | 最小 |
| deep-dive | 1 (+ references/) | 0 | 0 | 中 |
| development-toolkit | 3 | 4 | 5 | 最大 |

### 7. 新しいプラグイン/スキルを追加する手順

**daily-knowledge-sync スキルを追加する場合の推奨パターン**:

#### パターンA: 既存プラグインに追加 (development-toolkit など)
```
plugins/development-toolkit/
└── skills/
    └── daily-knowledge-sync/
        └── SKILL.md
```

plugin.json の skills 配列に追加:
```json
"skills": [
  "./skills/changelog",
  "./skills/secrets-guard",
  "./skills/mermaid-validator",
  "./skills/daily-knowledge-sync"  # 追加
]
```

#### パターンB: 新規プラグインとして作成
```
plugins/daily-knowledge-sync/
├── .claude-plugin/
│   └── plugin.json
└── skills/
    └── daily-knowledge-sync/
        ├── SKILL.md
        └── references/          # オプション
            └── templates.md
```

**推奨**: 単独の機能なら新規プラグインとして作成する方が管理しやすいです（quizknock, deep-diveパターン）。

### 8. 重要なファイル絶対パス

- **リポジトリルート**: `/Users/arigatatsuya/Work/git/github.com/sk8metalme/ai-agent-setup/`
- **プラグインディレクトリ**: `/Users/arigatatsuya/Work/git/github.com/sk8metalme/ai-agent-setup/plugins/`
- **参考になるシンプルなプラグイン**: 
  - `/Users/arigatatsuya/Work/git/github.com/sk8metalme/ai-agent-setup/plugins/quizknock/`
  - `/Users/arigatatsuya/Work/git/github.com/sk8metalme/ai-agent-setup/plugins/ci-cd-tools/`
- **参考になる複雑なプラグイン**: 
  - `/Users/arigatatsuya/Work/git/github.com/sk8metalme/ai-agent-setup/plugins/development-toolkit/`

---

この情報を元に、daily-knowledge-sync スキルをどのように追加するか（新規プラグインか既存への追加か）を決定できます。
